<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Oops! | SkyCast Weather</title>

    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" th:href="@{/css/style.css}">

    <style>
        .error-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }

        .error-card {
            max-width: 500px;
            text-align: center;
            animation: errorAppear 0.6s ease;
        }

        @keyframes errorAppear {
            0% {
                opacity: 0;
                transform: scale(0.9) translateY(20px);
            }
            100% {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        .error-icon {
            font-size: 6rem;
            margin-bottom: 2rem;
            background: linear-gradient(135deg, #EF4444, #F87171);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: bounce 2s ease infinite;
        }

        @keyframes bounce {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-15px);
            }
        }

        .error-code {
            font-size: 5rem;
            font-weight: 800;
            background: linear-gradient(135deg, #EF4444, #F87171);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 1rem;
            opacity: 0.8;
        }

        .error-title {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }

        .error-message {
            color: rgba(255, 255, 255, 0.6);
            margin-bottom: 2.5rem;
            font-size: 1.1rem;
            line-height: 1.6;
        }

        .action-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 2rem;
        }

        .btn-error {
            padding: 14px 30px;
            font-size: 1.1rem;
        }

        .error-details {
            margin-top: 2rem;
            padding: 1.5rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius-lg);
            text-align: left;
            font-family: monospace;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.5);
            display: none;
        }

        .toggle-details {
            margin-top: 1.5rem;
            color: var(--primary-light);
            text-decoration: none;
            font-size: 0.9rem;
            cursor: pointer;
            display: inline-block;
        }
    </style>
</head>
<body>
<!-- Background -->
<div class="bg-pattern"></div>

<!-- Error Container -->
<div class="error-container">
    <div class="error-card glass" style="padding: 3rem;">
        <div class="error-icon">
            <i class="bi bi-exclamation-triangle-fill"></i>
        </div>

        <div class="error-code">500</div>

        <h2 class="error-title">Something Went Wrong</h2>

        <div class="error-message" th:text="${message}">
            We encountered an unexpected error while processing your request.
            Our team has been notified and is working on a fix.
        </div>

        <div class="action-buttons">
            <a href="/" class="btn btn-primary btn-error">
                <i class="bi bi-house-door"></i>
                Back to Home
            </a>

            <button class="btn btn-outline btn-error" onclick="window.location.reload()">
                <i class="bi bi-arrow-clockwise"></i>
                Try Again
            </button>
        </div>

        <a class="toggle-details" onclick="toggleDetails()">
            <i class="bi bi-chevron-down"></i>
            Show Technical Details
        </a>

        <div class="error-details" id="errorDetails">
            <div style="margin-bottom: 10px; color: rgba(255, 255, 255, 0.7);">Error Details:</div>
            <div>Timestamp: <span th:text="${timestamp}"></span></div>
            <div>Path: <span th:text="${path}"></span></div>
            <div>Status: <span th:text="${status}"></span></div>
            <div>Error: <span th:text="${error}"></span></div>
        </div>
    </div>
</div>

<script>
    function toggleDetails() {
        const $details = $('#errorDetails');
        const $toggle = $('.toggle-details');

        if ($details.is(':visible')) {
            $details.slideUp();
            $toggle.html('<i class="bi bi-chevron-down"></i> Show Technical Details');
        } else {
            $details.slideDown();
            $toggle.html('<i class="bi bi-chevron-up"></i> Hide Technical Details');
        }
    }

    // Add some interactive effects
    $(document).ready(function() {
        $('.error-card').hover(
            function() {
                $(this).css('transform', 'translateY(-5px)');
            },
            function() {
                $(this).css('transform', 'translateY(0)');
            }
        );

        // Add pulse animation to try again button every 10 seconds
        setInterval(() => {
            $('.btn-outline').addClass('pulse');
            setTimeout(() => {
                $('.btn-outline').removeClass('pulse');
            }, 1000);
        }, 10000);
    });
</script>

<style>
    .pulse {
        animation: pulse 1s ease;
    }

    @keyframes pulse {
        0% {
            box-shadow: 0 0 0 0 rgba(79, 70, 229, 0.4);
        }
        70% {
            box-shadow: 0 0 0 10px rgba(79, 70, 229, 0);
        }
        100% {
            box-shadow: 0 0 0 0 rgba(79, 70, 229, 0);
        }
    }
</style>
</body>
</html>